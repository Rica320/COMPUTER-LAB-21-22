\hypertarget{i8254_8h_source}{}\doxysection{i8254.\+h}
\label{i8254_8h_source}\index{drivers/timer/i8254.h@{drivers/timer/i8254.h}}
\mbox{\hyperlink{i8254_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef \_LCOM\_I8254\_H\_}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define \_LCOM\_I8254\_H\_}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <lcom/lcf.h>}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define TIMER\_FREQ 1193182 }}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#define TIMER\_ASEC\_FREQ 60}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define TIMER\_BB\_FREQ 19 }}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define TIMER0\_IRQ 0     }}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#define TIMER0\_HOOK\_ID 2 }\textcolor{comment}{/* just a made up assignment*/}\textcolor{preprocessor}{}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{comment}{/* AVAILABLE TIMERS */}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#define FIRST\_TIMER 0}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define SECOND\_TIMER 1}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define THIRD\_TIMER 2}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{comment}{/* I/O port addresses */}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{preprocessor}{\#define TIMER\_0 0x40    }}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define TIMER\_1 0x41    }}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define TIMER\_2 0x42    }}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define TIMER\_CTRL 0x43 }}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define SPEAKER\_CTRL 0x61 }}
\DoxyCodeLine{28 \textcolor{comment}{/* Timer control */}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{/* Timer selection: bits 7 and 6 */}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{preprocessor}{\#define TIMER\_SEL0 0x00                }}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#define TIMER\_SEL1 BIT(6)              }}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#define TIMER\_SEL2 BIT(7)              }}
\DoxyCodeLine{35 \textcolor{preprocessor}{\#define TIMER\_RB\_CMD (BIT(7) | BIT(6)) }}
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define TIMER\_SEL(n) ((n == 0) ? TIMER\_SEL0 : BIT(5 + (n)))}}
\DoxyCodeLine{37 }
\DoxyCodeLine{38 \textcolor{comment}{/* Register selection: bits 5 and 4 */}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define TIMER\_LSB BIT(4)                      }}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define TIMER\_MSB BIT(5)                      }}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define TIMER\_LSB\_MSB (TIMER\_LSB | TIMER\_MSB) }}
\DoxyCodeLine{44 \textcolor{comment}{/* Operating mode: bits 3, 2 and 1 */}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define TIMER\_SQR\_WAVE (BIT(2) | BIT(1)) }}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#define TIMER\_RATE\_GEN BIT(2)            }}
\DoxyCodeLine{49 \textcolor{comment}{/* Counting mode: bit 0 */}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{preprocessor}{\#define TIMER\_BCD 0x01 }}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#define TIMER\_BIN 0x00 }}
\DoxyCodeLine{54 \textcolor{comment}{/* READ-\/BACK COMMAND FORMAT */}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{preprocessor}{\#define TIMER\_RB\_COUNT\_ BIT(5)}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#define TIMER\_RB\_STATUS\_ BIT(4)}}
\DoxyCodeLine{58 \textcolor{preprocessor}{\#define TIMER\_RB\_SEL(n) BIT((n) + 1)}}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{comment}{/* CONFIGURATION MODE */}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{preprocessor}{\#define CONF\_IN\_MODE(n) ((n \& (BIT(5) | BIT(4))) >> 4)}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#define CONF\_COUNT\_MODE(n) ((n \& (BIT(3) | BIT(2) | BIT(1))) \& BIT(2) ? ((n \& (BIT(2) | BIT(1))) >> 1) : ((n \& (BIT(3) | BIT(2) | BIT(1))) >> 1))}}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#define CONF\_BCD\_MODE(n) (n \& BIT(0))}}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{comment}{/* SOME UTILS MACRO*/}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 \textcolor{preprocessor}{\#define LSHUB\_IN\_BYTE(n) (n \& 0x0f) }}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* \_LCOM\_I8254\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
