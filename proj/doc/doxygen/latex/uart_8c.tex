\hypertarget{uart_8c}{}\doxysection{drivers/serial\+\_\+port/uart.c File Reference}
\label{uart_8c}\index{drivers/serial\_port/uart.c@{drivers/serial\_port/uart.c}}
{\ttfamily \#include \char`\"{}uart.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../utils/handlers.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}uart\+\_\+defines.\+h\char`\"{}}\newline
Include dependency graph for uart.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{uart_8c_af46d71bc11f74ea06014b284da2cfd5e}{ser\+\_\+set\+\_\+bits\+\_\+per\+\_\+char}} (unsigned short base\+\_\+addr, unsigned long bits)
\begin{DoxyCompactList}\small\item\em Sets the nr of bits to send in a communication. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_a46f2ce507a7e4a598e9d26c176cadc73}{ser\+\_\+set\+\_\+stop}} (unsigned short base\+\_\+addr, unsigned long stop)
\begin{DoxyCompactList}\small\item\em Sets the nr of stop bits. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_aef210ee4fd82a0ce631d3f777a3031bf}{ser\+\_\+set\+\_\+par}} (unsigned short base\+\_\+addr, long parity)
\begin{DoxyCompactList}\small\item\em Sets the parity. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_adfa85b7eb6564dd65bdcf25fed48af67}{enable\+\_\+dlab}} (unsigned short base\+\_\+addr)
\begin{DoxyCompactList}\small\item\em Enables the Divisor Latch. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_a57432396365cca8adc5ca1c278626c81}{disable\+\_\+dlab}} (unsigned short base\+\_\+addr)
\begin{DoxyCompactList}\small\item\em Disables the Divisor Latch. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_abae2865f5787aea70491e84bfb916283}{ser\+\_\+set\+\_\+bitrate}} (unsigned short base\+\_\+addr, unsigned long bitrate)
\begin{DoxyCompactList}\small\item\em Sets the bit rate / baund rate. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_af8cc98dccbc4245783d0372c27bcd4e5}{ser\+\_\+test\+\_\+set}} (unsigned short base\+\_\+addr, unsigned long bits, unsigned long stop, long parity, unsigned long rate)
\begin{DoxyCompactList}\small\item\em Sets the approriate configuration to use in the uart communication. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_ae09f0da25a7b29f453483b68642526b4}{set\+\_\+ier}} (unsigned short base\+\_\+addr, uint8\+\_\+t ier\+To\+Set, bool enable)
\begin{DoxyCompactList}\small\item\em Set the ier interrups desired, or disables them. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_a261626c5454851c891b1a2fffeb5d468}{ser\+\_\+subscribe\+\_\+int}} (uint8\+\_\+t $\ast$bit\+\_\+no, int $\ast$\mbox{\hyperlink{timer_8c_a96f78a87d064e47d627d222f67a8d012}{hook\+\_\+id}})
\begin{DoxyCompactList}\small\item\em subscribes an serial interrupt \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_a391d1a7653590fa61af5f9e4555baa7b}{ser\+\_\+unsubscribe\+\_\+int}} (int $\ast$\mbox{\hyperlink{timer_8c_a96f78a87d064e47d627d222f67a8d012}{hook\+\_\+id}})
\begin{DoxyCompactList}\small\item\em unsubscribes an serial interrupt \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_affe929e1a86b3820091459e1d0d20c5a}{ser\+\_\+writeb}} (unsigned short base\+\_\+addr, uint8\+\_\+t byte)
\begin{DoxyCompactList}\small\item\em allows writing to the serial port transmitter \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_a6cbceb0c5b0afd3ba7e1ed0b98d22b81}{ser\+\_\+readb}} (unsigned short base\+\_\+addr, uint8\+\_\+t $\ast$byte)
\begin{DoxyCompactList}\small\item\em reads a byte from the serial port received data \end{DoxyCompactList}\item 
void \mbox{\hyperlink{uart_8c_a67d2da4dd20c731989c130bbe2cd4c85}{uart\+\_\+ih}} ()
\begin{DoxyCompactList}\small\item\em Handles a uart ih. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{uart_8c_af61f778ff744934234df76d197d454d1}{get\+\_\+int\+\_\+type}} ()
\begin{DoxyCompactList}\small\item\em Get the type of interrupt that last occured on the serial port. This is used to try to make our serial ih more independent from the app, the fifo would be great for that. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{uart_8c_a57432396365cca8adc5ca1c278626c81}\label{uart_8c_a57432396365cca8adc5ca1c278626c81}} 
\index{uart.c@{uart.c}!disable\_dlab@{disable\_dlab}}
\index{disable\_dlab@{disable\_dlab}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{disable\_dlab()}{disable\_dlab()}}
{\footnotesize\ttfamily int disable\+\_\+dlab (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr }\end{DoxyParamCaption})}



Disables the Divisor Latch. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c_a57432396365cca8adc5ca1c278626c81_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_adfa85b7eb6564dd65bdcf25fed48af67}\label{uart_8c_adfa85b7eb6564dd65bdcf25fed48af67}} 
\index{uart.c@{uart.c}!enable\_dlab@{enable\_dlab}}
\index{enable\_dlab@{enable\_dlab}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{enable\_dlab()}{enable\_dlab()}}
{\footnotesize\ttfamily int enable\+\_\+dlab (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr }\end{DoxyParamCaption})}



Enables the Divisor Latch. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c_adfa85b7eb6564dd65bdcf25fed48af67_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_af61f778ff744934234df76d197d454d1}\label{uart_8c_af61f778ff744934234df76d197d454d1}} 
\index{uart.c@{uart.c}!get\_int\_type@{get\_int\_type}}
\index{get\_int\_type@{get\_int\_type}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{get\_int\_type()}{get\_int\_type()}}
{\footnotesize\ttfamily int get\+\_\+int\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the type of interrupt that last occured on the serial port. This is used to try to make our serial ih more independent from the app, the fifo would be great for that. 

\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c_af61f778ff744934234df76d197d454d1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_a6cbceb0c5b0afd3ba7e1ed0b98d22b81}\label{uart_8c_a6cbceb0c5b0afd3ba7e1ed0b98d22b81}} 
\index{uart.c@{uart.c}!ser\_readb@{ser\_readb}}
\index{ser\_readb@{ser\_readb}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_readb()}{ser\_readb()}}
{\footnotesize\ttfamily int ser\+\_\+readb (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{uint8\+\_\+t $\ast$}]{byte }\end{DoxyParamCaption})}



reads a byte from the serial port received data 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em byte} & the place to store the read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=243pt]{uart_8c_a6cbceb0c5b0afd3ba7e1ed0b98d22b81_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c_a6cbceb0c5b0afd3ba7e1ed0b98d22b81_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_abae2865f5787aea70491e84bfb916283}\label{uart_8c_abae2865f5787aea70491e84bfb916283}} 
\index{uart.c@{uart.c}!ser\_set\_bitrate@{ser\_set\_bitrate}}
\index{ser\_set\_bitrate@{ser\_set\_bitrate}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_set\_bitrate()}{ser\_set\_bitrate()}}
{\footnotesize\ttfamily int ser\+\_\+set\+\_\+bitrate (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{unsigned long}]{bitrate }\end{DoxyParamCaption})}



Sets the bit rate / baund rate. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em bitrate} & the desired bit rate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=272pt]{uart_8c_abae2865f5787aea70491e84bfb916283_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{uart_8c_abae2865f5787aea70491e84bfb916283_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_af46d71bc11f74ea06014b284da2cfd5e}\label{uart_8c_af46d71bc11f74ea06014b284da2cfd5e}} 
\index{uart.c@{uart.c}!ser\_set\_bits\_per\_char@{ser\_set\_bits\_per\_char}}
\index{ser\_set\_bits\_per\_char@{ser\_set\_bits\_per\_char}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_set\_bits\_per\_char()}{ser\_set\_bits\_per\_char()}}
{\footnotesize\ttfamily int ser\+\_\+set\+\_\+bits\+\_\+per\+\_\+char (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{unsigned long}]{bits }\end{DoxyParamCaption})}



Sets the nr of bits to send in a communication. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em bits} & the desired number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{uart_8c_af46d71bc11f74ea06014b284da2cfd5e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_aef210ee4fd82a0ce631d3f777a3031bf}\label{uart_8c_aef210ee4fd82a0ce631d3f777a3031bf}} 
\index{uart.c@{uart.c}!ser\_set\_par@{ser\_set\_par}}
\index{ser\_set\_par@{ser\_set\_par}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_set\_par()}{ser\_set\_par()}}
{\footnotesize\ttfamily int ser\+\_\+set\+\_\+par (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{long}]{parity }\end{DoxyParamCaption})}



Sets the parity. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em parity} & the desired parity \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=255pt]{uart_8c_aef210ee4fd82a0ce631d3f777a3031bf_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_a46f2ce507a7e4a598e9d26c176cadc73}\label{uart_8c_a46f2ce507a7e4a598e9d26c176cadc73}} 
\index{uart.c@{uart.c}!ser\_set\_stop@{ser\_set\_stop}}
\index{ser\_set\_stop@{ser\_set\_stop}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_set\_stop()}{ser\_set\_stop()}}
{\footnotesize\ttfamily int ser\+\_\+set\+\_\+stop (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{unsigned long}]{stop }\end{DoxyParamCaption})}



Sets the nr of stop bits. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em stop} & stops bits \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{uart_8c_a46f2ce507a7e4a598e9d26c176cadc73_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_a261626c5454851c891b1a2fffeb5d468}\label{uart_8c_a261626c5454851c891b1a2fffeb5d468}} 
\index{uart.c@{uart.c}!ser\_subscribe\_int@{ser\_subscribe\_int}}
\index{ser\_subscribe\_int@{ser\_subscribe\_int}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_subscribe\_int()}{ser\_subscribe\_int()}}
{\footnotesize\ttfamily int ser\+\_\+subscribe\+\_\+int (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{bit\+\_\+no,  }\item[{int $\ast$}]{hook\+\_\+id }\end{DoxyParamCaption})}



subscribes an serial interrupt 


\begin{DoxyParams}{Parameters}
{\em bit\+\_\+no} & the bit num attached to the interrupt \\
\hline
{\em hook\+\_\+id} & hook id that identifies the interrupt \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{uart_8c_af8cc98dccbc4245783d0372c27bcd4e5}\label{uart_8c_af8cc98dccbc4245783d0372c27bcd4e5}} 
\index{uart.c@{uart.c}!ser\_test\_set@{ser\_test\_set}}
\index{ser\_test\_set@{ser\_test\_set}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_test\_set()}{ser\_test\_set()}}
{\footnotesize\ttfamily int ser\+\_\+test\+\_\+set (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{unsigned long}]{bits,  }\item[{unsigned long}]{stop,  }\item[{long}]{parity,  }\item[{unsigned long}]{rate }\end{DoxyParamCaption})}



Sets the approriate configuration to use in the uart communication. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em bits} & bits per char \\
\hline
{\em stop} & nr.\+stop bits \\
\hline
{\em parity} & parity ... -\/1\+: none, 0\+: even, 1\+: odd \\
\hline
{\em rate} & baund rate ~\newline
 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{uart_8c_af8cc98dccbc4245783d0372c27bcd4e5_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_a391d1a7653590fa61af5f9e4555baa7b}\label{uart_8c_a391d1a7653590fa61af5f9e4555baa7b}} 
\index{uart.c@{uart.c}!ser\_unsubscribe\_int@{ser\_unsubscribe\_int}}
\index{ser\_unsubscribe\_int@{ser\_unsubscribe\_int}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_unsubscribe\_int()}{ser\_unsubscribe\_int()}}
{\footnotesize\ttfamily int ser\+\_\+unsubscribe\+\_\+int (\begin{DoxyParamCaption}\item[{int $\ast$}]{hook\+\_\+id }\end{DoxyParamCaption})}



unsubscribes an serial interrupt 


\begin{DoxyParams}{Parameters}
{\em hook\+\_\+id} & the identifier of the interrupt \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{uart_8c_affe929e1a86b3820091459e1d0d20c5a}\label{uart_8c_affe929e1a86b3820091459e1d0d20c5a}} 
\index{uart.c@{uart.c}!ser\_writeb@{ser\_writeb}}
\index{ser\_writeb@{ser\_writeb}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{ser\_writeb()}{ser\_writeb()}}
{\footnotesize\ttfamily int ser\+\_\+writeb (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{uint8\+\_\+t}]{byte }\end{DoxyParamCaption})}



allows writing to the serial port transmitter 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em byte} & the byte to send to the uart \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
\mbox{\Hypertarget{uart_8c_ae09f0da25a7b29f453483b68642526b4}\label{uart_8c_ae09f0da25a7b29f453483b68642526b4}} 
\index{uart.c@{uart.c}!set\_ier@{set\_ier}}
\index{set\_ier@{set\_ier}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{set\_ier()}{set\_ier()}}
{\footnotesize\ttfamily int set\+\_\+ier (\begin{DoxyParamCaption}\item[{unsigned short}]{base\+\_\+addr,  }\item[{uint8\+\_\+t}]{ier\+To\+Set,  }\item[{bool}]{enable }\end{DoxyParamCaption})}



Set the ier interrups desired, or disables them. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+addr} & base addr to use in comunnication \\
\hline
{\em ier\+To\+Set} & a byte with the wanted interrups set \\
\hline
{\em enable} & name is explanatory, true to enable, else disable \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{uart_8c_ae09f0da25a7b29f453483b68642526b4_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{uart_8c_a67d2da4dd20c731989c130bbe2cd4c85}\label{uart_8c_a67d2da4dd20c731989c130bbe2cd4c85}} 
\index{uart.c@{uart.c}!uart\_ih@{uart\_ih}}
\index{uart\_ih@{uart\_ih}!uart.c@{uart.c}}
\doxysubsubsection{\texorpdfstring{uart\_ih()}{uart\_ih()}}
{\footnotesize\ttfamily void uart\+\_\+ih (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Handles a uart ih. 

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=230pt]{uart_8c_a67d2da4dd20c731989c130bbe2cd4c85_cgraph}
\end{center}
\end{figure}
